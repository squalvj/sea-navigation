import React, { useEffect, useState, useRef } from "react";
import "./App.css";
import { MapView } from "./components/Map";
import { useMap } from "./hooks/useMap";
import { MapContext } from "./context/MapContext";
import Actions from "./components/Actions";

const data = {
  type: "FeatureCollection",
  features: [
    {
      type: "Feature",
      properties: {
        distance: 816366,
        mode: "sea",
        departure: 1688885259102,
        arrival: 1688955233102,
        duration: 69974000,
        speed: 42,
        areas: {
          type: "FeatureCollection",
          features: [
            {
              type: "Feature",
              properties: {
                id: 21120,
                name: "North Sea SECA",
                alternatives: [],
              },
              geometry: {
                type: "Point",
                coordinates: [4.1835169836905335, 55.863787276691106],
              },
            },
          ],
          properties: null,
        },
        details: [],
        secaIntersection: 816366,
        hraIntersection: 0,
        speedInKts: 22.678,
        intersectsIceArea: false,
        vessel: {
          imo: 8677225,
          name: "KSL PRIDE",
          length: 83,
          width: 15,
          maxDraft: 4.2,
          draft: 4.2,
        },
      },
      geometry: {
        type: "LineString",
        coordinates: [
          [9.965629577636719, 53.53296196255539],
          [9.96561996394217, 53.53293232241184],
          [9.962217954137689, 53.534024834980556],
          [9.952021538418792, 53.537332012830255],
          [9.94664244983364, 53.54248021015489],
          [9.92740156707279, 53.541558018788805],
          [9.899944968893692, 53.54189687915343],
          [9.870087929880809, 53.5446781684259],
          [9.793746802417843, 53.55512040937518],
          [9.66914366040914, 53.56688042398741],
          [9.646204178073045, 53.57640494716307],
          [9.5792, 53.6047],
          [9.551470299156298, 53.61512888837808],
          [9.516018127427433, 53.64945880998556],
          [9.502268837152112, 53.696084636688575],
          [9.404, 53.7539],
          [9.371273882258691, 53.81248403693656],
          [9.2921, 53.8637],
          [9.139630206013736, 53.878614336356065],
          [9.113484144015016, 53.87976724217441],
          [8.952771036003755, 53.8520418105436],
          [8.872180662013436, 53.84308483293138],
          [8.81814198604031, 53.84365449879415],
          [8.7726936451576, 53.85291106418734],
          [8.735835639365309, 53.87085452911095],
          [8.688146824758851, 53.900430439928],
          [8.629627201338227, 53.94163879663851],
          [8.559233717066519, 53.967994578690124],
          [8.476966371943725, 53.97949778608285],
          [8.426434601252765, 53.98671414234723],
          [8.407638404993637, 53.989643647483256],
          [8.35585421958783, 53.99538631072819],
          [8.271082045035342, 54.00394213208206],
          [8.19205534702689, 54.011062851993515],
          [8.082133514830266, 54.01959127969709],
          [7.9959804632048375, 54.05169448082161],
          [7.84696807692872, 54.09728147685661],
          [7.6063786721267705, 54.16705333484359],
          [7.467315924676293, 54.20283759892034],
          [7.411011789527785, 54.205532604170116],
          [7.14639676176231, 54.20796167273774],
          [6.851041196845467, 54.19798116831027],
          [6.470577497552377, 54.1899481908586],
          [6.313658002650975, 54.19004240191692],
          [5.9857311502137325, 54.160053283248445],
          [5.644499307961276, 54.13629309547248],
          [5.261, 54.10736841795313],
          [5.137299581746455, 54.09442806293325],
          [4.97473240347018, 54.082127887512044],
          [4.949306025451818, 54.021485756049145],
          [4.84512738264004, 53.87347369016805],
          [4.769299408099019, 53.76693589873501],
          [4.645994127287735, 53.59533459031698],
          [4.6132, 53.5309],
          [4.5952, 53.5079],
          [4.5778428384196195, 53.468567296109505],
          [4.4903, 53.2914],
          [4.389631908616309, 53.164996733659564],
          [4.1948, 53.0644],
          [4.154515365780758, 53.0441756934827],
          [4.0069473101258115, 52.96643871629764],
          [3.931807705428554, 52.93173263968305],
          [3.7625264047738316, 52.80484567129635],
          [3.6282043158329995, 52.7106150223054],
          [3.498922635098507, 52.61076519799626],
          [3.3847745894362316, 52.5272634018697],
          [3.2506912394879834, 52.41817047624813],
          [3.1889900252634518, 52.365597882941394],
          [3.154976496779888, 52.33318131340897],
          [3.1295432603806574, 52.30921347761394],
          [3.1126903160657613, 52.2936943755563],
          [3.085522882931235, 52.26857611839561],
          [3.0293, 52.2165],
          [2.9766, 52.1853],
          [2.8303362401254164, 52.079881955675745],
          [2.725515801032646, 51.99638261868358],
          [2.613384096096828, 51.89966264091544],
          [2.399429407393076, 51.798947304976814],
          [2.0836517349213906, 51.69423661086771],
          [1.8933330513442075, 51.63445503035609],
          [1.8284733566615265, 51.619602563441944],
          [1.7868664680063986, 51.608284847941164],
          [1.7685123853788236, 51.600501883853745],
          [1.7549041038865203, 51.59582927868384],
          [1.7460416235294887, 51.59426703243144],
          [1.7371133356569248, 51.59203862984277],
          [1.7281192402688283, 51.589144070917826],
          [1.634766812509934, 51.559091338375694],
          [1.4570560523802414, 51.50188043221636],
          [1.3528744143833469, 51.475794003864216],
          [1.3222218985192504, 51.48083205331926],
          [1.2424396428466644, 51.48500225260725],
          [1.1135276473655888, 51.48830460172819],
          [1.0152537372187882, 51.487566832216494],
          [0.9476179124062627, 51.48278894407217],
          [0.8954249999999999, 51.482225],
          [0.8586750000000001, 51.485875],
          [0.8216300013003256, 51.48792660763101],
          [0.7842900039009766, 51.48837982289302],
          [0.7509900039009766, 51.489529822893026],
          [0.7071, 51.4923],
          [0.6525430866058811, 51.50530481131392],
          [0.5545692388319577, 51.50345096620628],
          [0.5143660987849996, 51.50109668549277],
          [0.49844025631632394, 51.49992818992991],
          [0.4933906647436114, 51.49916071927987],
          [0.4808236380155488, 51.499842600918576],
          [0.45069694519042963, 51.503039451809734],
        ],
      },
    },
  ],
};

function App() {
  const mapRef = useRef<HTMLDivElement>(null);
  const { mapObject } = useMap(mapRef);
  return (
    <MapContext.Provider value={mapObject}>
      <div className="App relative">
        <div>
          <MapView map={mapRef} />
          {/* <div className="control absolute top-0 right-0 p-4 bg-white">
          <button onClick={handleAddFrom}>
            Add From
          </button>
        </div> */}
          <Actions />
        </div>
      </div>
    </MapContext.Provider>
  );
}

export default App;
